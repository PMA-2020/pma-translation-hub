<!DOCTYPE html>

<html>
<head>
  <title>ProtectedView.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="auth.html">
                auth.js
              </a>
            
              
              <a class="source" href="data.html">
                data.js
              </a>
            
              
              <a class="source" href="Analytics.html">
                UserManagement.js
              </a>
            
              
              <a class="source" href="AuthenticatedComponent.html">
                AuthenticatedComponent.js
              </a>
            
              
              <a class="source" href="DetermineAuth.html">
                DetermineAuth.js
              </a>
            
              
              <a class="source" href="LoginView.html">
                LoginView.js
              </a>
            
              
              <a class="source" href="NotFound.html">
                NotFound.js
              </a>
            
              
              <a class="source" href="ProtectedView.html">
                ProtectedView.js
              </a>
            
              
              <a class="source" href="RegisterView.html">
                RegisterView.js
              </a>
            
              
              <a class="source" href="TranslationTableComponent.html">
                TranslationTableComponent.js
              </a>
            
              
              <a class="source" href="notAuthenticatedComponent.html">
                notAuthenticatedComponent.js
              </a>
            
              
              <a class="source" href="index.html">
                index.js
              </a>
            
              
              <a class="source" href="index.html">
                index.js
              </a>
            
              
              <a class="source" href="auth.html">
                auth.js
              </a>
            
              
              <a class="source" href="data.html">
                data.js
              </a>
            
              
              <a class="source" href="index.html">
                index.js
              </a>
            
              
              <a class="source" href="routes.html">
                routes.js
              </a>
            
              
              <a class="source" href="configureStore.html">
                configureStore.js
              </a>
            
              
              <a class="source" href="style.html">
                style.scss
              </a>
            
              
              <a class="source" href="http_functions.html">
                http_functions.js
              </a>
            
              
              <a class="source" href="isMobileAndTablet.html">
                isMobileAndTablet.js
              </a>
            
              
              <a class="source" href="misc.html">
                misc.js
              </a>
            
              
              <a class="source" href="parallax.html">
                parallax.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>ProtectedView.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>
<span class="hljs-keyword">import</span> { bindActionCreators } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> actionCreators <span class="hljs-keyword">from</span> <span class="hljs-string">'../actions/data'</span>
<span class="hljs-keyword">import</span> TranslationTable <span class="hljs-keyword">from</span> <span class="hljs-string">'./TranslationTableComponent.js'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Needed for ‘RightNav’, which I should probably put in its own component and maybe call ‘UpdatePane’
TODO: Update Pane - The following two need to be uncommented when ready to work on this.
import RightNav from ‘material-ui/Drawer’
import Divider from ‘material-ui/Divider’
Not sure if I need these yet for the ‘update’ drawer/pane.
import { browserHistory } from ‘react-router’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapStateToProps</span>(<span class="hljs-params">state</span>) </span>{
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">data</span>: state.data,
        <span class="hljs-attr">token</span>: state.auth.token,
        <span class="hljs-attr">loaded</span>: state.data.loaded,
        <span class="hljs-attr">isFetching</span>: state.data.isFetching,
    }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDispatchToProps</span>(<span class="hljs-params">dispatch</span>) </span>{
    <span class="hljs-keyword">return</span> bindActionCreators(actionCreators, dispatch)
}

@connect(mapStateToProps, mapDispatchToProps)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProtectedView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    componentDidMount() {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">this</span>.fetchData()
        } <span class="hljs-keyword">catch</span> (e) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>pass</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">console</span>.log(e)
        }

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>TODO: Data - Fetch translation data from server. Both this function and in fetchData.
    fetchProtectedData(token) {
        try {
        passing()
        } catch (e) {
        // pass
}
    }</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    fetchData() {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">this</span>.props.token</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>this.props.fetchProtectedData(token)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">console</span>.log(token)
        } <span class="hljs-keyword">catch</span> (e) {</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>pass</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">console</span>.log(e)
        }

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>noinspection JSMethodCanBeStatic</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    render() {
        <span class="hljs-keyword">return</span> (
            &lt;div&gt;
                {/*TODO: Fix lazy loading*/}
                {/*{!this.props.loaded*/}
                    {/*Note: For some reason this still shows even when loaded.*/}
                    {/*? &lt;h1&gt;Loading data...&lt;/h1&gt;*/}
                    {/*:*/}
                    &lt;div&gt;
                        {/*&lt;h1&gt;Welcome back,&amp;nbsp*/}
                            {/*{this.props.userName}!&lt;/h1&gt;*/}
                        {/*Note: The below line doesn't work at the moment.*/}
                        {/*&lt;h1&gt;{this.props.data.data.email}&lt;/h1&gt;*/}
                    &lt;/div&gt;
                {/*}*/}
                {/*Note - This height tag is here as a placeholder for debugging tabel height issues.*/}
                {/*&lt;div style={{height: "100%"}}&gt;*/}
                &lt;div&gt;
                    {/*Visible to: */}
                    {/*This one should inherit from the base translation table and should have an extra column for 'status'. Such as 'new' or 'rejected'*/}
                    &lt;TranslationTable title="Translations Needed"/&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    {/*Visible to: */}
                    &lt;TranslationTable title="Pending Approval" /&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    {/*Visible to: */}
                    &lt;TranslationTable title="Approved"/&gt;
                &lt;/div&gt;



                {/*TODO: Update Pane - Make sure this opens correctly.*/}
                {/*&lt;RightNav open={this.state.open} openSecondary={true}&gt;*/}
                {/*&lt;RightNav open={true} openSecondary={true}&gt;*/}
                {/*The above two do not work at the moment, but the top one is ideal. The following line does currentlyw ork though.*/}
                {/*&lt;RightNav openSecondary={true}&gt;*/}
                        {/*TODO: Update Pane - Uncomment from here whenever permissions are in place. */}
                        {/*Conditional Authority Section */}
                        {/*Later on, change this logic to something like: !this.props.hasAuthority*/}
                        {/*It should not appear when the translator is clicking the pending approval button. Or perhaps the form options should just be different so they can edit submission, but not approve.*/}
                        {/* When this is ready, will* need to place within the {} object with below.*/}

                        {/*!this.props.isAuthenticated ?*/}
                            {/*&lt;div&gt;*/}
                                {/*&lt;p&gt;*/}
                                    {/*You do not have sufficient permissions to update */}
                                {/*&lt;/p&gt;*/}
                            {/*&lt;/div&gt;*/}
                            {/*:*/}

                    {/*TODO: Update Pane - Finish adding other pages first, then tackle this.*/}
                    {/*{*/}
                            {/*&lt;div&gt;*/}
                                {/*&lt;p&gt;*/}
                                    {/*Edit translation.*/}
                                {/*&lt;/p&gt;*/}
                                {/*&lt;Divider /&gt;*/}
                                    {/*Placeholder text for form.*/}
                            {/*&lt;/div&gt;*/}
                    {/*}*/}
                {/*&lt;/RightNav&gt;*/}


            &lt;/div&gt;
        )
    }
}

ProtectedView.propTypes = {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>fetchProtectedData: React.PropTypes.func,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    loaded: React.PropTypes.bool,
    <span class="hljs-attr">userName</span>: React.PropTypes.string,
    <span class="hljs-attr">data</span>: React.PropTypes.any,
    <span class="hljs-attr">token</span>: React.PropTypes.string,
}</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>TODO: Update Pane - Figure out what else of this I need.</p>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>import * as actionCreators from ‘../../actions/auth’</p>
<p>function mapStateToProps(state) {
    return {
        token: state.auth.token,
        userName: state.auth.userName,
        isAuthenticated: state.auth.isAuthenticated,
    }
}</p>
<p>function mapDispatchToProps(dispatch) {
    return bindActionCreators(actionCreators, dispatch)
}</p>
<p>@connect(mapStateToProps, mapDispatchToProps)
export class Header extends Component {
    constructor(props) {
        super(props)
        this.state = {
            open: false,
        }</p>
<pre><code>}

dispatchNewRoute(route) {
    browserHistory.push(route)
    <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">open</span>: <span class="hljs-literal">false</span>,
    })

}


handleClickOutside() {
    <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">open</span>: <span class="hljs-literal">false</span>,
    })
}


logout(e) {
    e.preventDefault()
    <span class="hljs-keyword">this</span>.props.logoutAndRedirect()
    <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">open</span>: <span class="hljs-literal">false</span>,
    })
}

openNav() {
    <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,
    })
}

render() {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
    )
}
</code></pre><p>}</p>
<p>Header.propTypes = {
    logoutAndRedirect: React.PropTypes.func,
    isAuthenticated: React.PropTypes.bool,
}</p>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
